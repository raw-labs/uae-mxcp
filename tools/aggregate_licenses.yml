mxcp: 1.0.0
tool:
  name: aggregate_licenses
  description: Aggregate licenses data by various dimensions
  parameters:
  - name: groupByLicensePk
    type: boolean
    description: Group by LicensePk
    default: false
  - name: groupByBl
    type: boolean
    description: Group by Bl
    default: false
  - name: groupByBlCbls
    type: boolean
    description: Group by BlCbls
    default: false
  - name: groupByEmirateNameEn
    type: boolean
    description: Group by EmirateNameEn
    default: false
  - name: groupByEmirateNameAr
    type: boolean
    description: Group by EmirateNameAr
    default: false
  - name: groupByIssuanceAuthorityEn
    type: boolean
    description: Group by IssuanceAuthorityEn
    default: false
  - name: groupByIssuanceAuthorityAr
    type: boolean
    description: Group by IssuanceAuthorityAr
    default: false
  - name: groupByIssuanceAuthorityBranchEn
    type: boolean
    description: Group by IssuanceAuthorityBranchEn
    default: false
  - name: groupByIssuanceAuthorityBranchAr
    type: boolean
    description: Group by IssuanceAuthorityBranchAr
    default: false
  - name: groupByBlStatusEn
    type: boolean
    description: Group by BlStatusEn
    default: false
  - name: groupByBlStatusAr
    type: boolean
    description: Group by BlStatusAr
    default: false
  - name: groupByBlNameEn
    type: boolean
    description: Group by BlNameEn
    default: false
  - name: groupByBlNameAr
    type: boolean
    description: Group by BlNameAr
    default: false
  - name: groupByBlLegalTypeEn
    type: boolean
    description: Group by BlLegalTypeEn
    default: false
  - name: groupByBlLegalTypeAr
    type: boolean
    description: Group by BlLegalTypeAr
    default: false
  - name: groupByBlTypeEn
    type: boolean
    description: Group by BlTypeEn
    default: false
  - name: groupByBlTypeAr
    type: boolean
    description: Group by BlTypeAr
    default: false
  - name: groupByLicenseBranchFlag
    type: boolean
    description: Group by LicenseBranchFlag
    default: false
  - name: groupByParentLicenseIssuanceAuthorityEn
    type: boolean
    description: Group by ParentLicenseIssuanceAuthorityEn
    default: false
  - name: groupByParentLicenseIssuanceAuthorityAr
    type: boolean
    description: Group by ParentLicenseIssuanceAuthorityAr
    default: false
  - name: groupByRelationshipTypeEn
    type: boolean
    description: Group by RelationshipTypeEn
    default: false
  - name: groupByRelationshipTypeAr
    type: boolean
    description: Group by RelationshipTypeAr
    default: false
  - name: groupByOwnerNationalityAr
    type: boolean
    description: Group by OwnerNationalityAr
    default: false
  - name: groupByOwnerGender
    type: boolean
    description: Group by OwnerGender
    default: false
  - name: groupByOwnerNationalityEn
    type: boolean
    description: Group by OwnerNationalityEn
    default: false
  - name: groupByBusinessActivityDescEn
    type: boolean
    description: Group by BusinessActivityDescEn
    default: false
  - name: groupByBusinessActivityDescAr
    type: boolean
    description: Group by BusinessActivityDescAr
    default: false
  - name: groupByLicenseLatitude
    type: boolean
    description: Group by LicenseLatitude
    default: false
  - name: groupByLicenseLongitude
    type: boolean
    description: Group by LicenseLongitude
    default: false
  - name: groupByLicenseLatitude1
    type: boolean
    description: Group by LicenseLatitude1
    default: false
  - name: groupByLicenseLongitude1
    type: boolean
    description: Group by LicenseLongitude1
    default: false
  - name: groupByBlEstDate
    type: boolean
    description: Group by BlEstDate
    default: false
  - name: groupByBlExpDate
    type: boolean
    description: Group by BlExpDate
    default: false
  - name: groupByBlFullAddress
    type: boolean
    description: Group by BlFullAddress
    default: false
  - name: groupByParentLicenceLicenseNumber
    type: boolean
    description: Group by ParentLicenceLicenseNumber
    default: false
  - name: groupByBusinessActivityCode
    type: boolean
    description: Group by BusinessActivityCode
    default: false
  - name: LicensePk
    type: string
    description: Filter by license_pk
  - name: Bl
    type: string
    description: Filter by bl
  - name: BlCbls
    type: string
    description: Filter by bl_cbls
  - name: EmirateNameEn
    type: string
    description: Filter by emirate_name_en
    enum:
    - Dubai
    - Abu Dhabi
    - Sharjah
    - Ajman
    - Ras Al Khaimah
    - Fujairah
    - Umm Al Quwain
    - Umm Al-Quwain
    - null
  - name: EmirateNameAr
    type: string
    description: Filter by emirate_name_ar
  - name: IssuanceAuthorityEn
    type: string
    description: Filter by issuance_authority_en
  - name: IssuanceAuthorityAr
    type: string
    description: Filter by issuance_authority_ar
  - name: IssuanceAuthorityBranchEn
    type: string
    description: Filter by issuance_authority_branch_en
  - name: IssuanceAuthorityBranchAr
    type: string
    description: Filter by issuance_authority_branch_ar
  - name: BlStatusEn
    type: string
    description: Filter by bl_status_en
    enum:
    - Active
    - Expired
    - Cancelled
    - Current
    - On Hold
    - In  Active
    - Inactive
    - Blocked
    - Suspended
    - Under Liquidation
    - Under Commercial Liquidation
    - Under Commercial Liquidation.
    - Under Commercial Liquida
    - Under Commercial Mortgage
    - null
  - name: BlEstDateDFrom
    type: string
    format: date
    description: Filter bl_est_date_d from date (YYYY-MM-DD)
  - name: BlEstDateDTo
    type: string
    format: date
    description: Filter bl_est_date_d to date (YYYY-MM-DD)
  - name: BlExpDateDFrom
    type: string
    format: date
    description: Filter bl_exp_date_d from date (YYYY-MM-DD)
  - name: BlExpDateDTo
    type: string
    format: date
    description: Filter bl_exp_date_d to date (YYYY-MM-DD)
  required: []
  return:
    type: array
    items:
      type: object
  source:
    file: ../sql/aggregate_licenses.sql
  enabled: true
  tests:
  - name: test_manual_aggregation
    description: Manual aggregation test that should be preserved
    arguments:
    - key: groupByEmirateNameEn
      value: true
    - key: EmirateNameEn
      value: Dubai
    result: data_returned
