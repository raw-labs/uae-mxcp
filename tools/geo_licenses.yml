mxcp: 1.0.0
tool:
  name: geo_licenses
  description: Analyze licenses by geographic location
  parameters:
  - name: groupByField
    type: string
    description: Geographic field to group by
    enum:
    - bl_full_address
    default: bl_full_address
  - name: includeCoordinates
    type: boolean
    description: Include lat/lon statistics
    default: false
  - name: boundingBox
    type: object
    description: Filter by bounding box coordinates
    properties:
      minLat:
        type: number
      maxLat:
        type: number
      minLon:
        type: number
      maxLon:
        type: number
  - name: filterLicensePk
    type: string
    description: Filter by LicensePk
  - name: filterBl
    type: string
    description: Filter by Bl
  - name: filterCbls
    type: string
    description: Filter by Cbls
  - name: filterEmirateNameEn
    type: string
    description: Filter by EmirateNameEn
  - name: filterEmirateNameAr
    type: string
    description: Filter by EmirateNameAr
  - name: filterIssuanceAuthorityEn
    type: string
    description: Filter by IssuanceAuthorityEn
  - name: filterIssuanceAuthorityAr
    type: string
    description: Filter by IssuanceAuthorityAr
  - name: filterIssuanceAuthorityBranchEn
    type: string
    description: Filter by IssuanceAuthorityBranchEn
  - name: filterIssuanceAuthorityBranchAr
    type: string
    description: Filter by IssuanceAuthorityBranchAr
  - name: filterStatusEn
    type: string
    description: Filter by StatusEn
  - name: EstDateFrom
    type: string
    format: date
    description: Filter EstDate from date (YYYY-MM-DD)
  - name: EstDateTo
    type: string
    format: date
    description: Filter EstDate to date (YYYY-MM-DD)
  - name: ExpDateFrom
    type: string
    format: date
    description: Filter ExpDate from date (YYYY-MM-DD)
  - name: ExpDateTo
    type: string
    format: date
    description: Filter ExpDate to date (YYYY-MM-DD)
  return:
    type: array
    items:
      type: object
      properties:
        location:
          type: string
        count:
          type: integer
        unique_licenses:
          type: integer
        avg_latitude:
          type: number
        avg_longitude:
          type: number
        min_latitude:
          type: number
        max_latitude:
          type: number
        min_longitude:
          type: number
        max_longitude:
          type: number
  source:
    file: ../sql/geo_licenses.sql
  enabled: true
